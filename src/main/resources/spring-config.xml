<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:util="http://www.springframework.org/schema/util"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
                        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
                        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.1.xsd">

    <context:annotation-config/>
    <context:component-scan base-package="com.cgz.capa"/>

    <bean id="SystemPermissionsInfoService" class="com.cgz.capa.logic.services.SystemPermissionsInfoService">
        <constructor-arg
                value="${permissionsInfo.manifestUri}"/>
    </bean>

    <bean id="ApplicationDescriptionParserService"
          class="com.cgz.capa.logic.services.ApplicationDescriptionParserService">
        <constructor-arg
                value="${applicationDesctiption.googplePlayUri}"/>
    </bean>

    <bean id="GooglePlayCrawlerService" class="com.cgz.capa.logic.services.GooglePlayCrawlerService" scope="prototype">
        <constructor-arg index="0" value="${crawler.email}"/>
        <constructor-arg index="1" value="${crawler.password}"/>
    </bean>

    <bean id="RiskScoreFactory" class="com.cgz.capa.logic.services.RiskScoreFactory">
        <constructor-arg index="0" value="${riskScore.names}"/>
        <constructor-arg index="1" value="${riskScore.points}"/>
    </bean>

    <bean id="AlgorithmExecutor" class="com.cgz.capa.logic.scoring.impl.BasicAlgorithmExecutor" autowire="constructor"/>

    <bean id="ResultAnalyser" class="com.cgz.capa.logic.scoring.impl.BasicResultAnalyser" autowire="constructor"/>

    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <list>
                <value>classpath*:application.properties</value>
            </list>
        </property>
        <property name="ignoreResourceNotFound" value="false"/>
    </bean>


    <util:list id="algorithmSteps" list-class="java.util.ArrayList"
               value-type="com.cgz.capa.logic.scoring.interfaces.AlgorithmStep">
        <ref bean="scoreAppPermissionsStep"/>
        <ref bean="contrastWithMarketVersionStep"/>
        <ref bean="contrastWithSimilarAppsStep"/>
    </util:list>


</beans>